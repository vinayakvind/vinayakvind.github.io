<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-6404032174018146">
  <title>World Priority - What Should Humanity Focus On?</title>
  <meta name="description" content="Vote on the most important issues facing humanity. See global trends and what people think the world should prioritize.">
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6404032174018146" crossorigin="anonymous"></script>
  
  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #fff;
    }
    
    /* Header */
    .header {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 15px 30px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .globe {
      font-size: 40px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .logo h1 {
      font-size: 24px;
      font-weight: 900;
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .logo .tagline {
      font-size: 11px;
      color: rgba(255,255,255,0.6);
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    
    .auth-section {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.1);
      padding: 8px 15px;
      border-radius: 50px;
    }
    
    .user-profile img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid #00d4ff;
    }
    
    .user-profile span {
      font-size: 14px;
      font-weight: 600;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,212,255,0.3);
    }
    
    .btn-outline {
      background: transparent;
      border: 2px solid rgba(255,255,255,0.3);
      color: white;
    }
    
    .btn-outline:hover {
      background: rgba(255,255,255,0.1);
    }
    
    /* Hero Section */
    .hero {
      text-align: center;
      padding: 60px 20px 40px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .hero h2 {
      font-size: 48px;
      font-weight: 900;
      margin-bottom: 20px;
      line-height: 1.2;
    }
    
    .hero h2 span {
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .hero p {
      font-size: 18px;
      color: rgba(255,255,255,0.7);
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 50px;
      padding: 30px;
      flex-wrap: wrap;
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 900;
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stat-label {
      font-size: 12px;
      color: rgba(255,255,255,0.5);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-top: 5px;
    }
    
    /* Main Container */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px 60px;
    }
    
    /* Section Title */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .section-title {
      font-size: 28px;
      font-weight: 800;
    }
    
    .section-title span {
      color: #00d4ff;
    }
    
    /* Priority Cards */
    .priority-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .priority-card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 25px;
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.3s;
    }
    
    .priority-card:hover {
      background: rgba(255,255,255,0.08);
      border-color: rgba(0,212,255,0.3);
      transform: translateX(5px);
    }
    
    .rank {
      font-size: 32px;
      font-weight: 900;
      min-width: 50px;
      text-align: center;
    }
    
    .rank.gold { color: #ffd700; }
    .rank.silver { color: #c0c0c0; }
    .rank.bronze { color: #cd7f32; }
    .rank.normal { color: rgba(255,255,255,0.4); }
    
    .priority-info {
      flex: 1;
    }
    
    .priority-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .priority-meta {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .category-tag {
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .priority-desc {
      font-size: 13px;
      color: rgba(255,255,255,0.5);
    }
    
    .vote-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .vote-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid rgba(0,212,255,0.5);
      background: rgba(0,212,255,0.1);
      color: #00d4ff;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .vote-btn:hover:not(:disabled) {
      background: #00d4ff;
      color: #1a1a2e;
      transform: scale(1.1);
    }
    
    .vote-btn.voted {
      background: #00d4ff;
      color: #1a1a2e;
    }
    
    .vote-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .vote-count {
      font-size: 18px;
      font-weight: 700;
      color: #00d4ff;
    }
    
    /* Add Priority Section */
    .add-section {
      margin-top: 40px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 30px;
    }
    
    .add-section h3 {
      font-size: 22px;
      margin-bottom: 20px;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      background: rgba(255,255,255,0.05);
      color: white;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.3s;
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #00d4ff;
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }
    
    .form-group select option {
      background: #1a1a2e;
    }
    
    .login-prompt {
      text-align: center;
      padding: 30px;
      color: rgba(255,255,255,0.6);
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 40px;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      text-align: center;
    }
    
    .modal-content h3 {
      font-size: 24px;
      margin-bottom: 15px;
    }
    
    .modal-content p {
      color: rgba(255,255,255,0.6);
      margin-bottom: 25px;
    }
    
    .google-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: white;
      color: #333;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      font-size: 16px;
      transition: all 0.3s;
    }
    
    .google-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(255,255,255,0.2);
    }
    
    .google-btn img {
      width: 20px;
      height: 20px;
    }
    
    .close-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      background: none;
      border: none;
      color: rgba(255,255,255,0.5);
      cursor: pointer;
    }
    
    /* Alert */
    .alert {
      position: fixed;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
      padding: 15px 30px;
      border-radius: 10px;
      font-weight: 600;
      z-index: 3000;
      animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
      from { top: 70px; opacity: 0; }
      to { top: 100px; opacity: 1; }
    }
    
    .alert-success {
      background: linear-gradient(135deg, #00d4ff, #7b2cbf);
      color: white;
    }
    
    .alert-error {
      background: #dc3545;
      color: white;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      padding: 30px;
      color: rgba(255,255,255,0.4);
      font-size: 14px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .hero h2 { font-size: 32px; }
      .form-row { grid-template-columns: 1fr; }
      .priority-card { flex-direction: column; text-align: center; }
      .stats-bar { gap: 30px; }
      .header-content { justify-content: center; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <span class="globe">üåç</span>
        <div>
          <h1>World Priority</h1>
          <div class="tagline">Shape The Future</div>
        </div>
      </div>
      
      <div class="auth-section">
        <div id="userSection" style="display: none;">
          <div class="user-profile">
            <img id="userPhoto" src="" alt="Profile">
            <span id="userName"></span>
          </div>
          <button class="btn btn-outline" onclick="logout()">Logout</button>
        </div>
        <div id="loginSection">
          <button class="btn btn-primary" onclick="showLoginModal()">
            üîê Sign in with Google
          </button>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Hero -->
  <section class="hero">
    <h2>What Should <span>Humanity</span> Focus On?</h2>
    <p>Vote on the most critical issues facing our world. See real-time trends and discover what people believe should be humanity's top priorities.</p>
  </section>
  
  <!-- Stats -->
  <div class="stats-bar">
    <div class="stat">
      <div class="stat-value" id="totalVotes">0</div>
      <div class="stat-label">Total Votes</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="totalPriorities">0</div>
      <div class="stat-label">Priorities</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="totalUsers">0</div>
      <div class="stat-label">Participants</div>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="container">
    <div class="section-header">
      <h3 class="section-title">üèÜ Global <span>Leaderboard</span></h3>
    </div>
    
    <div id="priorityList" class="priority-list">
      <!-- Priority items will be loaded here -->
    </div>
    
    <!-- Add Priority Section -->
    <div class="add-section">
      <h3>‚ú® Suggest a New Priority</h3>
      <div id="addPriorityContent">
        <div id="loginPrompt" class="login-prompt">
          <p>üîê Please sign in with Google to suggest new priorities</p>
          <button class="btn btn-primary" onclick="showLoginModal()" style="margin-top: 15px;">Sign in with Google</button>
        </div>
        <form id="addPriorityForm" style="display: none;" onsubmit="submitPriority(event)">
          <div class="form-row">
            <div class="form-group">
              <label>Priority Title</label>
              <input type="text" id="priorityTitle" placeholder="e.g., Climate Action" required maxlength="100">
            </div>
            <div class="form-group">
              <label>Category</label>
              <select id="priorityCategory" required>
                <option value="">Select category...</option>
                <option value="Environment">üå± Environment</option>
                <option value="Health">üè• Health</option>
                <option value="Education">üìö Education</option>
                <option value="Peace">‚òÆÔ∏è Peace & Security</option>
                <option value="Poverty">üí∞ Poverty & Inequality</option>
                <option value="Technology">ü§ñ Technology</option>
                <option value="Human Rights">‚öñÔ∏è Human Rights</option>
                <option value="Other">üåê Other</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>Description (optional)</label>
            <textarea id="priorityDesc" placeholder="Briefly explain why this is important..." maxlength="300"></textarea>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%;">üöÄ Submit Priority</button>
        </form>
      </div>
    </div>
  </div>
  
  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content" style="position: relative;">
      <button class="close-modal" onclick="closeLoginModal()">√ó</button>
      <h3>üåç Join World Priority</h3>
      <p>Sign in to vote on priorities and submit your own suggestions for what humanity should focus on.</p>
      <div id="googleButtonContainer"></div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="footer">
    <p>üåç World Priority - Making humanity's voice heard | ¬© 2026</p>
  </footer>
  
  <script>
    // ==========================================
    // WORLD PRIORITY - PURE GITHUB PAGES VERSION
    // ==========================================
    
    // Your Google OAuth Client ID - Replace with your actual client ID
    const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com';
    
    // Current user
    let currentUser = null;
    
    // Default priorities data (will sync with localStorage)
    const DEFAULT_PRIORITIES = [
      { id: '1', title: 'Climate Change Action', category: 'Environment', description: 'Urgent action needed to reduce global emissions and protect our planet', votes: 15847, voters: [] },
      { id: '2', title: 'Universal Healthcare', category: 'Health', description: 'Access to quality healthcare for everyone regardless of income', votes: 12453, voters: [] },
      { id: '3', title: 'End World Hunger', category: 'Poverty', description: 'Ensure food security and nutrition for all people globally', votes: 11234, voters: [] },
      { id: '4', title: 'Quality Education for All', category: 'Education', description: 'Free, quality education accessible to every child worldwide', votes: 9876, voters: [] },
      { id: '5', title: 'Clean Water Access', category: 'Environment', description: 'Safe drinking water and sanitation for all communities', votes: 8765, voters: [] },
      { id: '6', title: 'Mental Health Awareness', category: 'Health', description: 'Destigmatize and improve access to mental health resources', votes: 7654, voters: [] },
      { id: '7', title: 'Renewable Energy Transition', category: 'Technology', description: 'Accelerate shift from fossil fuels to sustainable energy', votes: 6543, voters: [] },
      { id: '8', title: 'Gender Equality', category: 'Human Rights', description: 'Equal rights and opportunities regardless of gender', votes: 5432, voters: [] },
      { id: '9', title: 'End Armed Conflicts', category: 'Peace', description: 'Work towards peaceful resolution of all armed conflicts', votes: 4321, voters: [] },
      { id: '10', title: 'AI Safety & Ethics', category: 'Technology', description: 'Ensure artificial intelligence benefits humanity safely', votes: 3210, voters: [] }
    ];
    
    // Initialize Google Sign-In
    function initGoogleSignIn() {
      if (typeof google !== 'undefined' && google.accounts) {
        google.accounts.id.initialize({
          client_id: GOOGLE_CLIENT_ID,
          callback: handleGoogleSignIn,
          auto_select: true
        });
        
        // Render the Google button in modal
        google.accounts.id.renderButton(
          document.getElementById('googleButtonContainer'),
          { 
            theme: 'filled_blue', 
            size: 'large', 
            width: 280,
            text: 'signin_with'
          }
        );
        
        // Check for existing session
        const savedUser = localStorage.getItem('worldPriorityUser');
        if (savedUser) {
          currentUser = JSON.parse(savedUser);
          updateUIForLoggedInUser();
        }
      } else {
        // If Google Sign-In not loaded, show demo mode
        setTimeout(initGoogleSignIn, 500);
      }
    }
    
    // Handle Google Sign-In response
    function handleGoogleSignIn(response) {
      const payload = parseJwt(response.credential);
      
      currentUser = {
        id: payload.sub,
        name: payload.name,
        email: payload.email,
        photo: payload.picture
      };
      
      // Save user session
      localStorage.setItem('worldPriorityUser', JSON.stringify(currentUser));
      
      // Track user for stats
      trackUser(currentUser.id);
      
      updateUIForLoggedInUser();
      closeLoginModal();
      showAlert('Welcome, ' + currentUser.name + '! üéâ', 'success');
    }
    
    // Parse JWT token
    function parseJwt(token) {
      const base64Url = token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }
    
    // Update UI for logged in user
    function updateUIForLoggedInUser() {
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('userSection').style.display = 'flex';
      document.getElementById('userPhoto').src = currentUser.photo;
      document.getElementById('userName').textContent = currentUser.name.split(' ')[0];
      document.getElementById('loginPrompt').style.display = 'none';
      document.getElementById('addPriorityForm').style.display = 'block';
      renderPriorities();
    }
    
    // Logout
    function logout() {
      currentUser = null;
      localStorage.removeItem('worldPriorityUser');
      document.getElementById('loginSection').style.display = 'block';
      document.getElementById('userSection').style.display = 'none';
      document.getElementById('loginPrompt').style.display = 'block';
      document.getElementById('addPriorityForm').style.display = 'none';
      renderPriorities();
      showAlert('Logged out successfully', 'success');
    }
    
    // Show/Hide Login Modal
    function showLoginModal() {
      document.getElementById('loginModal').classList.add('active');
    }
    
    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('active');
    }
    
    // Get priorities from localStorage or use defaults
    function getPriorities() {
      const stored = localStorage.getItem('worldPriorities');
      if (stored) {
        return JSON.parse(stored);
      }
      localStorage.setItem('worldPriorities', JSON.stringify(DEFAULT_PRIORITIES));
      return DEFAULT_PRIORITIES;
    }
    
    // Save priorities to localStorage
    function savePriorities(priorities) {
      localStorage.setItem('worldPriorities', JSON.stringify(priorities));
    }
    
    // Track unique users
    function trackUser(userId) {
      const users = JSON.parse(localStorage.getItem('worldPriorityUsers') || '[]');
      if (!users.includes(userId)) {
        users.push(userId);
        localStorage.setItem('worldPriorityUsers', JSON.stringify(users));
      }
    }
    
    // Render priorities list
    function renderPriorities() {
      const priorities = getPriorities().sort((a, b) => b.votes - a.votes);
      const container = document.getElementById('priorityList');
      
      let totalVotes = 0;
      priorities.forEach(p => totalVotes += p.votes);
      
      const users = JSON.parse(localStorage.getItem('worldPriorityUsers') || '[]');
      
      document.getElementById('totalVotes').textContent = totalVotes.toLocaleString();
      document.getElementById('totalPriorities').textContent = priorities.length;
      document.getElementById('totalUsers').textContent = users.length.toLocaleString();
      
      container.innerHTML = priorities.map((priority, index) => {
        const rank = index + 1;
        const rankClass = rank === 1 ? 'gold' : rank === 2 ? 'silver' : rank === 3 ? 'bronze' : 'normal';
        const medal = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : '';
        
        const hasVoted = currentUser && priority.voters && priority.voters.includes(currentUser.id);
        const canVote = currentUser && !hasVoted;
        
        return `
          <div class="priority-card">
            <div class="rank ${rankClass}">${medal || '#' + rank}</div>
            <div class="priority-info">
              <div class="priority-title">${escapeHtml(priority.title)}</div>
              <div class="priority-meta">
                <span class="category-tag">${escapeHtml(priority.category)}</span>
                ${priority.description ? `<span class="priority-desc">${escapeHtml(priority.description)}</span>` : ''}
              </div>
            </div>
            <div class="vote-section">
              <button class="vote-btn ${hasVoted ? 'voted' : ''}" 
                      onclick="vote('${priority.id}')" 
                      ${!canVote ? 'disabled' : ''}
                      title="${!currentUser ? 'Sign in to vote' : hasVoted ? 'Already voted' : 'Vote for this priority'}">
                ${hasVoted ? '‚úì' : '‚ñ≤'}
              </button>
              <div class="vote-count">${priority.votes.toLocaleString()}</div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    // Vote for a priority
    function vote(priorityId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      const priorities = getPriorities();
      const priority = priorities.find(p => p.id === priorityId);
      
      if (!priority) return;
      
      if (!priority.voters) priority.voters = [];
      
      if (priority.voters.includes(currentUser.id)) {
        showAlert('You have already voted for this priority', 'error');
        return;
      }
      
      priority.voters.push(currentUser.id);
      priority.votes++;
      
      savePriorities(priorities);
      renderPriorities();
      showAlert('Vote recorded! üéâ', 'success');
    }
    
    // Submit new priority
    function submitPriority(event) {
      event.preventDefault();
      
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      const title = document.getElementById('priorityTitle').value.trim();
      const category = document.getElementById('priorityCategory').value;
      const description = document.getElementById('priorityDesc').value.trim();
      
      if (!title || !category) {
        showAlert('Please fill in required fields', 'error');
        return;
      }
      
      const priorities = getPriorities();
      
      // Check for duplicates
      if (priorities.some(p => p.title.toLowerCase() === title.toLowerCase())) {
        showAlert('A similar priority already exists!', 'error');
        return;
      }
      
      const newPriority = {
        id: Date.now().toString(),
        title: title,
        category: category,
        description: description,
        votes: 1,
        voters: [currentUser.id],
        submittedBy: currentUser.name,
        createdAt: new Date().toISOString()
      };
      
      priorities.push(newPriority);
      savePriorities(priorities);
      
      // Reset form
      document.getElementById('addPriorityForm').reset();
      
      renderPriorities();
      showAlert('Priority submitted successfully! üöÄ', 'success');
    }
    
    // Show alert message
    function showAlert(message, type) {
      const existing = document.querySelector('.alert');
      if (existing) existing.remove();
      
      const alert = document.createElement('div');
      alert.className = `alert alert-${type}`;
      alert.textContent = message;
      document.body.appendChild(alert);
      
      setTimeout(() => alert.remove(), 3000);
    }
    
    // Escape HTML
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text || '';
      return div.innerHTML;
    }
    
    // Close modal on outside click
    document.getElementById('loginModal').addEventListener('click', function(e) {
      if (e.target === this) closeLoginModal();
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      initGoogleSignIn();
      renderPriorities();
    });
    
    // Also try to init after a short delay (for script load timing)
    setTimeout(() => {
      renderPriorities();
    }, 100);
  </script>
</body>
</html>